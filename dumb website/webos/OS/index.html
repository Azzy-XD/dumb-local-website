<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebOS</title>
    <link rel="icon" href="https://placehold.co/32x32/1a73e8/ffffff?text=OS" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* General styles */
        
        body {
            font-family: 'Inter', sans-serif;
            background-image: url('https://placehold.co/1920x1080/0f172a/ffffff?text=WebOS');
            background-size: cover;
            background-position: center;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            color: #f8fafc;
        }
        /* Desktop specific styles */
        
        #desktop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        /* Start Menu specific styles */
        
        .start-menu {
            position: absolute;
            bottom: 64px;
            left: 12px;
            width: 280px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
            padding: 16px;
            transform-origin: bottom left;
            animation: slideUp 0.3s ease-out;
            display: none;
            z-index: 2000;
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        /* App-specific styles */
        
        .app-icon {
            cursor: pointer;
            width: 80px;
            height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            user-select: none;
            transition: transform 0.1s;
        }
        
        .app-icon:hover {
            transform: scale(1.05);
        }
        /* General window styling */
        
        .window {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
            resize: both;
            overflow: hidden;
            min-width: 320px;
            min-height: 240px;
            z-index: 1000;
        }
        
        .window-header {
            cursor: move;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background-color: #e2e8f0;
            border-bottom: 1px solid #cbd5e1;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }
        
        .window-content {
            padding: 16px;
            height: calc(100% - 40px);
            overflow-y: auto;
        }
        /* Terminal specific styles */
        
        .terminal-output {
            background-color: #0f172a;
            color: #d1d5db;
            padding: 10px;
            height: calc(100% - 40px);
            overflow-y: auto;
            white-space: pre-wrap;
            border-bottom-left-radius: 12px;
            border-bottom-right-radius: 12px;
        }
        
        .terminal-input-line {
            display: flex;
            align-items: center;
            background-color: #0f172a;
            padding: 10px;
            border-top: 1px solid #1f2937;
        }
        
        .terminal-input {
            flex-grow: 1;
            background-color: transparent;
            border: none;
            color: #d1d5db;
            outline: none;
            font-family: 'monospace';
            caret-color: #6ee7b7;
        }
        /* Calculator specific styles */
        
        .calculator {
            background-color: #f8fafc;
        }
        
        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }
        
        .calculator-buttons button {
            background-color: #e2e8f0;
            padding: 16px;
            border-radius: 8px;
            font-size: 1.25rem;
            font-weight: 600;
            transition: background-color 0.15s;
            color: black;
        }
        
        .calculator-buttons button:hover {
            background-color: #cbd5e1;
        }
        /* Dumbass button style */
        
        .calculator-buttons button.dumb-calc {
            background-color: #ef4444;
            color: white;
        }
        
        .calculator-buttons button.dumb-calc:hover {
            background-color: #dc2626;
        }
        /* Operator and equals button styles */
        
        .calculator-buttons button.operator {
            background-color: #3b82f6;
            color: white;
        }
        
        .calculator-buttons button.operator:hover {
            background-color: #2563eb;
        }
    </style>
</head>

<body>

    <div id="start-menu" class="start-menu">
        <h2 class="font-bold text-lg mb-4 text-black">Applications</h2>
        <div class="space-y-2">
            <button id="start-menu-terminal" class="w-full flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors text-black">
            <svg class="w-6 h-6 mr-3 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
            Terminal
        </button>
            <button id="start-menu-calculator" class="w-full flex items-center p-3 rounded-lg hover:bg-gray-200 transition-colors text-black">
            <svg class="w-6 h-6 mr-3 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 4h.01M12 20h.01M12 16h.01M12 12h.01M12 8h.01M4 21h16a2 2 0 002-2V5a2 2 0 00-2-2H4a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
            Dumbass Calculator
        </button>
        </div>
    </div>

    <div class="absolute top-4 left-4 grid grid-cols-1 gap-4 z-50">
        <div class="app-icon" id="desktop-terminal">
            <svg class="w-12 h-12 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
            <span class="mt-2 text-sm font-medium">Terminal</span>
        </div>
        <div class="app-icon" id="desktop-calculator">
            <svg class="w-12 h-12 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 4h.01M12 20h.01M12 16h.01M12 12h.01M12 8h.01M4 21h16a2 2 0 002-2V5a2 2 0 00-2-2H4a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
            <span class="mt-2 text-sm font-medium">Dumbass Calculator</span>
        </div>
    </div>

    <div class="fixed bottom-0 left-0 right-0 h-12 bg-gray-900 bg-opacity-80 backdrop-blur-md flex items-center px-3 z-[2001] rounded-t-xl shadow-lg">
        <button id="start-button" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-full transition-colors">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a8 8 0 100 16 8 8 0 000-16zM5 9a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z"></path></svg>
    </button>
        <div class="flex-grow"></div>
        <span class="text-white text-sm" id="current-time"></span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- File System Simulation ---
            const fileSystem = {
                'dumbass_calculator': {
                    'mainindex.html': 'Calculator App'
                },
                'webos': {
                    'OS': {
                        'index.html': 'WebOS Skeleton',
                        'desktop.css': 'Desktop Stylesheet',
                        'startmenu.css': 'Start Menu Stylesheet',
                        'apps.css': 'App Stylesheet',
                        'apps.html': 'App list',
                        'apps.js': 'App Logic',
                        'terminal.cpp': 'Terminal Backend'
                    }
                }
            };

            let currentPath = '/';

            // --- Terminal Logic ---
            let terminalOutput;
            let terminalInput;

            const printToTerminal = (text) => {
                const line = document.createElement('div');
                line.textContent = text;
                terminalOutput.appendChild(line);
                terminalOutput.scrollTop = terminalOutput.scrollHeight;
            };

            const handleCommand = (command) => {
                const [cmd, ...args] = command.trim().split(' ');
                printToTerminal(`> ${command}`);
                switch (cmd) {
                    case 'ls':
                        handleLs();
                        break;
                    case 'cd':
                        handleCd(args[0]);
                        break;
                    case 'pwd':
                        printToTerminal(currentPath);
                        break;
                    case 'open':
                        handleOpen(args[0]);
                        break;
                    case 'clear':
                        terminalOutput.innerHTML = '';
                        break;
                    case 'help':
                        printToTerminal('Available commands:');
                        printToTerminal('  ls          - List files in current directory');
                        printToTerminal('  cd [dir]    - Change directory (e.g., cd webos)');
                        printToTerminal('  pwd         - Print working directory');
                        printToTerminal('  open [file] - Open a file (e.g., open terminal.cpp)');
                        printToTerminal('  clear       - Clear the terminal screen');
                        break;
                    case '':
                        break;
                    default:
                        printToTerminal(`-webos: ${cmd}: command not found`);
                        break;
                }
            };

            const handleLs = () => {
                const parts = currentPath.split('/').filter(p => p);
                let currentDir = fileSystem;
                parts.forEach(part => {
                    if (currentDir[part]) {
                        currentDir = currentDir[part];
                    } else {
                        currentDir = {};
                    }
                });

                if (Object.keys(currentDir).length === 0) {
                    printToTerminal('...');
                } else {
                    Object.keys(currentDir).forEach(item => {
                        if (typeof currentDir[item] === 'object') {
                            printToTerminal(`  ${item}/`);
                        } else {
                            printToTerminal(`  ${item}`);
                        }
                    });
                }
            };

            const handleCd = (dir) => {
                if (!dir) {
                    currentPath = '/';
                    return;
                }
                if (dir === '..') {
                    const parts = currentPath.split('/').filter(p => p);
                    if (parts.length > 0) {
                        parts.pop();
                        currentPath = '/' + parts.join('/') + (parts.length > 0 ? '/' : '');
                    }
                } else if (dir.startsWith('/')) {
                    const parts = dir.split('/').filter(p => p);
                    let currentDir = fileSystem;
                    let isValidPath = true;
                    parts.forEach(part => {
                        if (currentDir[part]) {
                            currentDir = currentDir[part];
                        } else {
                            isValidPath = false;
                        }
                    });
                    if (isValidPath) {
                        currentPath = dir.endsWith('/') ? dir : dir + '/';
                    } else {
                        printToTerminal(`-webos: cd: ${dir}: No such file or directory`);
                    }
                } else {
                    const parts = currentPath.split('/').filter(p => p);
                    let currentDir = fileSystem;
                    parts.forEach(part => currentDir = currentDir[part]);
                    if (currentDir[dir] && typeof currentDir[dir] === 'object') {
                        currentPath += dir + '/';
                    } else {
                        printToTerminal(`-webos: cd: ${dir}: No such file or directory`);
                    }
                }
            };

            const handleOpen = (file) => {
                const fullPath = (currentPath === '/' ? '' : currentPath) + file;
                if (fullPath === '/dumbass_calculator/mainindex.html') {
                    openCalculator();
                } else if (fullPath === '/webos/OS/index.html') {
                    printToTerminal('Already at the main OS.');
                } else if (fullPath === '/webos/OS/terminal.cpp') {
                    printToTerminal('Opening terminal.cpp...');
                    printToTerminal('/*');
                    printToTerminal(' * This file simulates a C++ file within your webOS file system.');
                    printToTerminal(' * C++ cannot be executed directly in a web browser.');
                    printToTerminal(' * The terminal logic is written in JavaScript.');
                    printToTerminal(' */');
                    printToTerminal('#include <iostream>');
                    printToTerminal('');
                    printToTerminal('int main() {');
                    printToTerminal('    std::cout << "Hello from the C++ file!" << std::endl;');
                    printToTerminal('    return 0;');
                    printToTerminal('}');
                } else {
                    printToTerminal(`-webos: open: ${file}: No such file or app.`);
                }
            };

            // --- Window Management ---
            const windows = {};

            const openWindow = (id, title, contentHtml) => {
                if (windows[id] && windows[id].style.display !== 'none') {
                    focusWindow(id);
                    return;
                }

                let windowElement = windows[id];
                if (!windowElement) {
                    windowElement = document.createElement('div');
                    windowElement.id = id;
                    windowElement.className = 'window flex flex-col';
                    windowElement.style.width = '700px';
                    windowElement.style.height = '500px';
                    windowElement.style.top = '10%';
                    windowElement.style.left = '10%';

                    const header = document.createElement('div');
                    header.className = 'window-header';
                    header.innerHTML = `
                    <span class="font-bold text-sm text-gray-800">${title}</span>
                    <button class="close-btn text-gray-500 hover:text-red-500 transition-colors">&times;</button>
                `;

                    const content = document.createElement('div');
                    content.className = 'window-content';
                    content.innerHTML = contentHtml;

                    windowElement.appendChild(header);
                    windowElement.appendChild(content);
                    document.body.appendChild(windowElement);

                    windows[id] = windowElement;

                    // Make the window draggable
                    header.addEventListener('mousedown', (e) => {
                        const startX = e.clientX;
                        const startY = e.clientY;
                        const startLeft = windowElement.offsetLeft;
                        const startTop = windowElement.offsetTop;

                        const onMouseMove = (moveEvent) => {
                            const newLeft = startLeft + moveEvent.clientX - startX;
                            const newTop = startTop + moveEvent.clientY - startY;
                            windowElement.style.left = newLeft + 'px';
                            windowElement.style.top = newTop + 'px';
                        };

                        const onMouseUp = () => {
                            document.removeEventListener('mousemove', onMouseMove);
                            document.removeEventListener('mouseup', onMouseUp);
                        };

                        document.addEventListener('mousemove', onMouseMove);
                        document.addEventListener('mouseup', onMouseUp);
                    });

                    // Close button
                    header.querySelector('.close-btn').addEventListener('click', () => {
                        windowElement.style.display = 'none';
                    });
                }

                windowElement.style.display = 'flex';
                focusWindow(id);
            };

            const focusWindow = (id) => {
                Object.values(windows).forEach(win => win.style.zIndex = '1000');
                windows[id].style.zIndex = '1001';
            };

            // --- App Launchers ---
            const openTerminal = () => {
                const terminalHtml = `
                <div id="terminal-output" class="terminal-output flex flex-col justify-end">
                    <div>Welcome to WebOS Terminal. Type 'help' for commands.</div>
                    <div class="mt-auto flex items-center">
                        <span id="current-path-prefix">${currentPath}> </span>
                        <input type="text" id="terminal-input" class="terminal-input flex-1" autofocus>
                    </div>
                </div>
            `;
                openWindow('terminal-window', 'Terminal', terminalHtml);
                const terminalWindow = document.getElementById('terminal-window');
                terminalOutput = terminalWindow.querySelector('#terminal-output');
                terminalInput = terminalWindow.querySelector('#terminal-input');

                terminalInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        const command = e.target.value;
                        if (command.trim() !== '') {
                            handleCommand(command);
                            e.target.value = '';
                        }
                    }
                });
            };

            const openCalculator = () => {
                const calculatorHtml = `
                <div class="p-4 flex flex-col items-center">
                    <h1 class="text-2xl font-bold mb-4 text-black">Dumbass Calculator</h1>
                    <div class="w-full max-w-sm mb-4">
                        <input id="calculator-display" class="w-full text-right p-4 text-3xl font-bold rounded-lg bg-gray-100 border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 text-black" type="text" value="0" readonly>
                    </div>
                    <div class="calculator-buttons w-full max-w-sm">
                        <button class="col-span-2" data-value="clear">AC</button>
                        <button data-value="backspace">&larr;</button>
                        <button data-value="dumb-calc" class="dumb-calc">Dumb!</button>
                        <button data-value="7">7</button>
                        <button data-value="8">8</button>
                        <button data-value="9">9</button>
                        <button data-value="/" class="operator">/</button>
                        <button data-value="4">4</button>
                        <button data-value="5">5</button>
                        <button data-value="6">6</button>
                        <button data-value="*" class="operator">*</button>
                        <button data-value="1">1</button>
                        <button data-value="2">2</button>
                        <button data-value="3">3</button>
                        <button data-value="-" class="operator">-</button>
                        <button data-value="0">0</button>
                        <button data-value=".">.</button>
                        <button data-value="=" class="col-span-2 operator">=</button>
                        <button data-value="+" class="operator">+</button>
                    </div>
                </div>
            `;
                openWindow('calculator-window', 'Dumbass Calculator', calculatorHtml);
                setupCalculatorLogic();
            };

            const setupCalculatorLogic = () => {
                const display = document.getElementById('calculator-display');
                let expression = '';

                document.querySelectorAll('#calculator-window .calculator-buttons button').forEach(button => {
                    button.addEventListener('click', () => {
                        const value = button.dataset.value;
                        if (value === 'clear') {
                            expression = '';
                            display.value = '0';
                        } else if (value === 'backspace') {
                            expression = expression.slice(0, -1);
                            display.value = expression || '0';
                        } else if (value === '=') {
                            try {
                                const result = eval(expression);
                                display.value = result;
                                expression = result.toString();
                            } catch (e) {
                                display.value = 'Error';
                                expression = '';
                            }
                        } else if (value === 'dumb-calc') {
                            const randomAnswer = Math.floor(Math.random() * 1000000);
                            const dumbMessages = [
                                'Error 404: Brain not found.',
                                'Your guess is as good as mine.',
                                'Answer is currently on vacation.',
                                'Beep boop, calculation complete!',
                                'This is the wrong number.',
                                'The answer is always 42... or maybe this?',
                                'What even is math?',
                                'Why do you ask me such things?'
                            ];
                            const randomMessage = dumbMessages[Math.floor(Math.random() * dumbMessages.length)];
                            display.value = `${randomAnswer} (${randomMessage})`;
                            expression = '';
                        } else {
                            if (display.value === '0' && value !== '.') {
                                expression = value;
                            } else {
                                expression += value;
                            }
                            display.value = expression;
                        }
                    });
                });
            };

            // --- Event Listeners for Icons and Taskbar ---
            document.getElementById('start-button').addEventListener('click', () => {
                const startMenu = document.getElementById('start-menu');
                startMenu.style.display = startMenu.style.display === 'block' ? 'none' : 'block';
            });

            document.getElementById('desktop-terminal').addEventListener('click', openTerminal);
            document.getElementById('start-menu-terminal').addEventListener('click', openTerminal);

            document.getElementById('desktop-calculator').addEventListener('click', openCalculator);
            document.getElementById('start-menu-calculator').addEventListener('click', openCalculator);

            // --- Time Display ---
            const updateTime = () => {
                const now = new Date();
                const timeString = now.toLocaleTimeString('en-US', {
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                });
                document.getElementById('current-time').textContent = timeString;
            };
            setInterval(updateTime, 1000);
            updateTime();
        });
    </script>

</body>

</html>